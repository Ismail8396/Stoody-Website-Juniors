const toggleSwitch=document.querySelector('.theme-switch input[type="checkbox"]'),currentTheme=localStorage.getItem("theme");function switchTheme(e){e.target.checked?(document.documentElement.setAttribute("data-theme","dark"),localStorage.setItem("theme","dark")):(document.documentElement.setAttribute("data-theme","light"),localStorage.setItem("theme","light"))}currentTheme&&(document.documentElement.setAttribute("data-theme",currentTheme),"light"===currentTheme&&null!=toggleSwitch&&(toggleSwitch.checked=!0)),null!=toggleSwitch&&toggleSwitch.addEventListener("change",switchTheme,!1);
const developmentMode="DEVELOPMENT",releaseMode="RELEASE",stoodyEnvironment="DEVELOPMENT",StoodyBootstrapFileIcons={mp4:"mdi mdi-play",mp3:"bi-music-note",ogg:"bi-music-note",wav:"bi-music-note",pdf:"bi-file-earmark-pdf",rar:"bi-file-zip",zip:"bi-file-zip-fill",doc:"bi-file-word-fill",docx:"bi-file-word-fill",docm:"bi-file-word-fill",dot:"bi-file-word-fill",txt:"bi-type",jpg:"bi-file-earmark-richtext-fill",png:"bi-file-earmark-richtext-fill",jpeg:"bi-file-earmark-richtext-fill",tif:"bi-file-earmark-richtext-fill",tiff:"bi-file-earmark-richtext-fill",flp:"bi-file-earmark-music",file:"bi-file-earmark",java:"bi-file-earmark-code",jsp:"bi-file-earmark-code",cpp:"bi-file-earmark-code",hxx:"bi-file-earmark-code",Hxx:"bi-file-earmark-code",HXX:"bi-file-earmark-code",c:"bi-file-earmark-code",h:"bi-file-earmark-code",html:"bi-file-earmark-code",css:"bi-file-earmark-code",js:"bi-file-earmark-code",py:"bi-file-earmark-code",class:"bi-file-earmark-code",cmd:"bi-file-earmark-code",lib:"bi-stack",jar:"bi-stack",stoody:"bi-emoji-sunglasses"};function getIconByExtension(e){for(const[t,o]of Object.entries(StoodyBootstrapFileIcons))if(t==e)return o;return StoodyBootstrapFileIcons.file}function checkIfObject(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e}function parseFileSize(e){var t=Math.pow(10,1);return(e=Math.round(e/1024))<1e3?e+" KB":(e=Number.parseFloat(e/1024))<1e3?Math.round(e*t)/t+" MB":(e=Number.parseFloat(e/1024),Math.round(e*t)/t+" GB")}function timeSince(e){var t=Math.floor((new Date-e)/1e3),o=t/31536e3;return o>1?Math.floor(o)+" years":(o=t/2592e3)>1?Math.floor(o)+" months":(o=t/86400)>1?Math.floor(o)+" days":(o=t/3600)>1?Math.floor(o)+" hours":(o=t/60)>1?Math.floor(o)+" minutes":Math.floor(t)+" seconds"}function formattedTimeSince(e){var t=1e3*e;return timeSince(new Date(Date.now()-t))}function naiveSearch(e,t){return e.toLowerCase().includes(t.toLowerCase())}function setCookie(e,t,o){var n="";if(o){var i=new Date;i.setTime(i.getTime()+24*o*60*60*1e3),n="; expires="+i.toUTCString()}document.cookie=e+"="+(t||"")+n+"; path=/"}function getCookie(e){for(var t=e+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(var i=o[n];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return null}function setCurrentLocale(e){setCookie("Locale",e.toLowerCase(),30),location.reload()}function get_url_extension(e){return e.split(/[#?]/)[0].split(".").pop().trim()}const CourseLevelEnum={Beginners:0,Intermediate:1,Advance:2,ZeroToHero:3};function getBlankLecture(){return{title:null,locked:!0,uiCollapsed:!1,userFile:null,video:null,description:null,quiz:null,article:new FormData,articleName:null}}function getBlankSection(){return{title:"",lectures:[]}}function getBlankUserFile(){return{id:0,name:"",url:new FormData}}function getBlankVideo(){return{id:0,name:"",url:new FormData,videoDuration:0,subtitles:[]}}function getBlankCourse(){return{id:0,congratulationsMessage:"",contextTags:"",currency:"",description:"",discount:"",languageCode:"",tags:"",title:"",welcomeMessage:"",courseCategoryId:0,courseStatus:0,level:0,price:0,thumbnail:null,promoVideo:null,sections:[]}}!function(){if($(".dropdown-menu a.dropdown-toggle").length&&$(".dropdown-menu a.dropdown-toggle").on("click",(function(e){return $(this).next().hasClass("show")||$(this).parents(".dropdown-menu").first().find(".show").removeClass("show"),$(this).next(".dropdown-menu").toggleClass("show"),$(this).parents("li.nav-item.dropdown.show").on("hidden.bs.dropdown",(function(e){$(".dropdown-submenu .show").removeClass("show")})),!1})),$('[data-bs-toggle="tooltip"]').length)[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map((function(e){return new bootstrap.Tooltip(e)}));if($('[data-bs-toggle="popover"]').length)[].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]')).map((function(e){return new bootstrap.Popover(e)}));if($("#cardRadioone , #cardRadioTwo").length&&($("#internetpayment").hide(),$("#cardRadioone").on("change",(function(){this.checked&&($("#cardpayment").show(),$("#internetpayment").hide())})),$("#cardRadioTwo").on("change",(function(){this.checked&&($("#internetpayment").show(),$("#cardpayment").hide())}))),$(".password-field input").length){function e(e){var t=0;return e.length>=6&&(t+=1),e.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)&&(t+=1),e.match(/([a-zA-Z])/)&&e.match(/([0-9])/)&&(t+=1),t}$(".password-field input").on("keyup",(function(){var t=e($(this).val()),o=$(this).parent(".password-field");o.removeClass((function(e,t){return(t.match(/\level\S+/g)||[]).join(" ")})),o.addClass("level"+t)}))}if($('[data-upload-id="courseImage"]').length){new FileUploadWithPreview.FileUploadWithPreview("courseImage")}if($("#nav-toggle").length&&$("#nav-toggle").on("click",(function(e){e.preventDefault(),$("#db-wrapper").toggleClass("toggled")})),$("#invoice").length&&$("#invoice").find(".print-link").on("click",(function(){$.print("#invoice")})),$(".sidebar-nav-fixed a").length&&$(".sidebar-nav-fixed a").on("click",(function(e){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var t=$(this.hash);(t=t.length?t:$("[name="+this.hash.slice(1)+"]")).length&&(e.preventDefault(),$("html, body").animate({scrollTop:t.offset().top-90},1e3,(function(){var e=$(t);if(e.focus(),e.is(":focus"))return!1;e.attr("tabindex","-1"),e.focus()})))}$(".sidebar-nav-fixed a").each((function(){$(this).removeClass("active")})),$(this).addClass("active")})),$("#checkAll").length&&$("#checkAll").on("click",(function(){$("input:checkbox").not(this).prop("checked",this.checked)})),$("#btn-icon").length&&$(".btn-icon").on("click",(function(){$(this).parent().addClass("active").siblings().removeClass("active")})),$(".stopevent").length&&$(document).on("click.bs.dropdown.data-api",".stopevent",(function(e){e.stopPropagation()})),$("input[name=tags]").length){var t=document.querySelector("input[name=tags]");new Tagify(t)}if($(".tagifyInput").each((function(e,t){new Tagify(t)})),$(".headingTyped").length){const z=$(".typedTextContent").text().split(", ");console.log(z);new Typed(".headingTyped",{strings:z,typeSpeed:30,backSpeed:30,backDelay:2e3,loop:!0})}if($(".needs-validation").length){var o=document.querySelectorAll(".needs-validation");Array.prototype.slice.call(o).forEach((function(e){e.addEventListener("submit",(function(t){e.checkValidity()||(t.preventDefault(),t.stopPropagation()),e.classList.add("was-validated")}),!1)}))}if($(".toast").length)[].slice.call(document.querySelectorAll(".toast")).map((function(e){return new bootstrap.Toast(e)}));if($(".offcanvas").length)[].slice.call(document.querySelectorAll(".offcanvas")).map((function(e){return new bootstrap.Offcanvas(e)}));if($(".dropdown-toggle").length)[].slice.call(document.querySelectorAll(".dropdown-toggle")).map((function(e){return new bootstrap.Dropdown(e)}));if($("#dataTableBasic").length&&$(document).ready((function(){$("#dataTableBasic").DataTable({responsive:!0})})),$("#liveAlertPlaceholder").length){var n=document.getElementById("liveAlertPlaceholder"),i=document.getElementById("liveAlertBtn");i&&i.addEventListener("click",(function(){var e,t,o;e="Nice, you triggered this alert message!",t="success",(o=document.createElement("div")).innerHTML='<div class="alert alert-'+t+' alert-dismissible" role="alert">'+e+'<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button></div>',n.append(o)}))}if($("#typed").length)new Typed("#typed",{stringsElement:"#typed-strings",typeSpeed:40,backSpeed:40,backDelay:1e3,loop:!0});if($("#slider").length){var a=document.getElementById("slider");noUiSlider.create(a,{start:[32],connect:[!0,!1],range:{min:0,max:60},tooltips:[wNumb({decimals:0})]})}if($(".glightboxGallery").length)GLightbox({selector:".glightboxGallery"});const l=65565,r="/sign-in",s="/redirect-page",d="/stoody/api/v1",c=d+"/user";function u(e,t){$("#"+e).length?1==t?$("#"+e).show():$("#"+e).hide():console.log("There's no such element with this id:"+e)}function p(e,t){return $("#"+e).length?(t?$("#"+e).prop("disabled",!0):$("#"+e).prop("disabled",!1),!0):(console.log(e+" does not belong to any existing element!"),!1)}if($("#standard_navbar_code_a").length){const U={SNB_LIKE:"fe fe-thumbs-up",SNB_AWARD:"bi-award",SNB_INFO:"bi-info-circle"};let j=[];function m(e){let t=$("#dropdownNotificationSecond"),o=$("#dropdownNotificationSecondMobile");e?(t.hasClass("indicator indicator-primary")||t.addClass("indicator indicator-primary"),o.hasClass("indicator indicator-primary")||o.addClass("indicator indicator-primary")):(t.hasClass("indicator indicator-primary")&&t.removeClass("indicator indicator-primary"),o.hasClass("indicator indicator-primary")&&o.removeClass("indicator indicator-primary"))}function f(){var e='                                    <li class="p-3 text-muted">                                        <i class="bi-bell-slash-fill"></i>                                        <span class="ms-2">No Notifications</span>                                    </li>';function t(e){let t=[],o=!1;if(e)for(let e=0;e<j.length;e++){let n=j[e];n.read||(o=!0);let i='<li class="list-group-item bg-light">                                        <div class="row">                                            <div class="col">                                                <a class="text-body" href="#">                                                    <div class="d-flex">'+(n.senderPhotoUrl?'                                                        <img src="'+n.senderPhotoUrl+'" alt="" class="avatar-md rounded-circle">':"")+'                                                        <div class="ms-3">                                                            <h5 class="fw-bold mb-1"> '+n.senderUsername+' </h5>                                                            <p class="mb-3 text-body">'+n.content+'                                                            </p>                                                            <span class="fs-6 text-muted">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span><span\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="'+U[n.badge]+' text-success me-1"></span>'+n.createdAt+'</span>                                                            </span>                                                        </div>                                                    </div>                                                </a>                                            </div>                                            <div class="col-auto text-center me-2">'+(n.read?"":'                                                <a id="notificationSecondMarkAsRead'+n.id+'" href="#" class="badge-dot bg-info">')+'                                                </a>                                                <div>                                                    <a id="notificationSecondRemoveNotification'+n.id+'" href="#" class="bg-transparent">                                                        <i class="fe fe-x text-muted"></i>                                                    </a>                                                </div>                                            </div>                                        </div>                                    </li>';t.push(i)}else for(let e=0;e<j.length;e++){let n=j[e];n.read||(o=!0);let i='<li class="list-group-item bg-light">                                        <div class="row">                                            <div class="col">                                                <a class="text-body" href="#">                                                    <div class="d-flex">'+(n.senderPhotoUrl?'                                                        <img src="'+n.senderPhotoUrl+'" alt="" class="avatar-md rounded-circle">':"")+'                                                        <div class="ms-3">                                                            <h5 class="fw-bold mb-1"> '+n.senderUsername+' </h5>                                                            <p class="mb-3 text-body">'+n.content+'                                                            </p>                                                            <span class="fs-6 text-muted">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span><span\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="'+U[n.badge]+' text-success me-1"></span>'+n.createdAt+'</span>                                                            </span>                                                        </div>                                                    </div>                                                </a>                                            </div>                                            <div class="col-auto text-center me-2">'+(n.read?"":'                                                <a id="notificationSecondMarkAsReadMobile'+n.id+'" href="#" class="badge-dot bg-info">')+'                                                </a>                                                <div>                                                    <a id="notificationSecondRemoveNotificationMobile'+n.id+'" href="#" class="bg-transparent">                                                        <i class="fe fe-x text-muted"></i>                                                    </a>                                                </div>                                            </div>                                        </div>                                    </li>';t.push(i)}return{_anyUnreadMessage_:o,_variables_:t}}if(t(!1)._anyUnreadMessage_?m(!0):m(!1),j.length<1)$("#notificationBoxSeeAllButton").hide(),$("#notificationBoxListGroup").html(e),$("#notificationBoxSeeAllButtonMobile").hide(),$("#notificationBoxListGroupMobile").html(e);else{let e=t(!1)._variables_.reverse(),o=t(!0)._variables_.reverse();$("#notificationBoxSeeAllButton").show(),$("#notificationBoxListGroup").html(e.join(" ")),$("#notificationBoxSeeAllButtonMobile").show(),$("#notificationBoxListGroupMobile").html(o.join(" "));for(let e=0;e<j.length;e++)$("#notificationSecondRemoveNotification"+j[e].id).on("click",(function(){console.log("remove this "+j[e].id);var t={url:"/stoody/api/v1/user/notifications/simple/remove?id="+j[e].id,method:"POST",timeout:0};$.ajax(t).done((function(e){h()})),$(this).hide()})),$("#notificationSecondRemoveNotificationMobile"+j[e].id).on("click",(function(){console.log("remove this "+j[e].id);var t={url:"/stoody/api/v1/user/notifications/simple/remove?id="+j[e].id,method:"POST",timeout:0};$.ajax(t).done((function(e){h()})),$(this).hide()})),j[e].read||($("#notificationSecondMarkAsRead"+j[e].id).on("click",(function(){console.log("clicked"+j[e].id);var t={url:"/stoody/api/v1/user/notifications/simple/read?id="+j[e].id,method:"POST",timeout:0};$.ajax(t).done((function(e){h()})),$(this).hide()})),$("#notificationSecondMarkAsReadMobile"+j[e].id).on("click",(function(){console.log("clicked"+j[e].id);var t={url:"/stoody/api/v1/user/notifications/simple/read?id="+j[e].id,method:"POST",timeout:0};$.ajax(t).done((function(e){h()})),$(this).hide()})))}}function h(){$.ajax({url:"/stoody/api/v1/user/notifications/simple/get/all",method:"GET",timeout:0}).done((function(e){try{e.response.length<1?(j=[],f()):j=e.response}catch(e){j=[]}f()}))}h();var g=null,_=null,v=new SockJS("/ws");(g=Stomp.over(v)).connect({},(function(e){g.subscribe("/all/messages",(function(e){h()}))})),v=new SockJS("/ws"),(_=Stomp.over(v)).connect({},(function(e){_.subscribe("/user/specific",(function(e){h()}))}))}if($("#sign_in_page_submit_button").length&&$("#sign_in_page_submit_button").on("click",(function(){$("#sign_in_page_submit_button").attr("disabled",!0),$("#sign_in_page_submit_button_spinner").show();var e=new FormData;e.append("username",$("#username").val()),e.append("password",$("#password").val());var t={url:c+r,method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:e};$.ajax(t).done((function(e){$("#sign_in_page_submit_button_spinner").hide();let t=JSON.parse(e),o=t.responseStatus,n=t.response;"OTP_REQUIRED_AND_SENT"==o?window.location.href="/verify-password?openCode="+l:"SUCCESS"==o?(console.log(n),setCookie("Auth",n,7),window.location.href="/",console.log(getCookie("Auth"))):($("#sign_in_page_submit_button").attr("disabled",!1),$("#error_div").show())})).fail((function(){$("#sign_in_page_submit_button").attr("disabled",!1),$("#sign_in_page_submit_button_spinner").hide(),$("#error_div").show()}))})),$("#verify_password_page_submit_button").length&&$("#verify_password_page_submit_button").on("click",(function(){$("#verify_password_page_submit_button").attr("disabled",!0),$("#verify_password_page_submit_button_spinner").show();var e=new FormData;e.append("token",$("#validationCode").val()),e.append("username",$("#username").val());var t={url:c+r+"/verify",method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:e};$.ajax(t).done((function(e){let t=JSON.parse(e),o=t.responseStatus,n=t.response;"SUCCESS"==o?(console.log(n),setCookie("Auth",n,7),window.location.href=s+"?openCode="+l+"&header=global.success&message=global.you_have_signed_in_successfully",console.log(getCookie("Auth"))):"FAIL"==o?($("#verify_password_page_submit_button").attr("disabled",!1),$("#error_div").show()):window.location.href="ACCOUNT_TEMPORAL_BLOCK_TOO_MANY_REQUESTS"==o?s+"?openCode="+l+"&header=global.account_blocked_temporarily&message=global.account_blocked_too_many_attempts":s+"?openCode="+l+"&header=global.error&message=global.unknown_error_happened_sorry"})).fail((function(){window.location.href=s+"?openCode="+l+"&header=global.error&message=global.unknown_error_happened_sorry"}))})),$("#profile_edit_update_picture_button").length&&($("#profile_edit_update_picture_button").on("click",(function(){$("#profile_edit_update_picture_input_file").click()})),$("#profile_edit_update_picture_input_file").on("change",(function(e){p("profile_edit_delete_picture_button",!0),$("#profile_edit_delete_picture_button_spinner").hide(),$("#profile_edit_update_picture_button_spinner").show(),$("#profile_edit_page_avatar_error").hide();let t=new FormData;t.append("file",document.getElementById("profile_edit_update_picture_input_file").files[0]),console.log(document.getElementById("profile_edit_update_picture_input_file").files[0]);var o={url:"/stoody/api/v1/upload/user/file",method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:t};$.ajax(o).done((function(e){try{let n=JSON.parse(e),i=n.responseStatus,a=n.response;if("SUCCESS"==i){var t=new FormData;t.append("pictureURL",a.url);var o={url:"/stoody/api/v1/user/update/picture",method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:t};$.ajax(o).done((function(e){let t=JSON.parse(e),o=t.responseStatus;t.response;"SUCCESS"==o?location.reload():(p("profile_edit_delete_picture_button",!1),$("#profile_edit_delete_picture_button_spinner").hide(),$("#profile_edit_update_picture_button_spinner").hide(),$("#profile_edit_page_avatar_error").show())})).fail((function(){p("profile_edit_delete_picture_button",!1),$("#profile_edit_delete_picture_button_spinner").hide(),$("#profile_edit_update_picture_button_spinner").hide(),$("#profile_edit_page_avatar_error").show()}))}else p("profile_edit_delete_picture_button",!1),$("#profile_edit_delete_picture_button_spinner").hide(),$("#profile_edit_update_picture_button_spinner").hide(),$("#profile_edit_page_avatar_error").show()}catch(e){p("profile_edit_delete_picture_button",!1),$("#profile_edit_delete_picture_button_spinner").hide(),$("#profile_edit_update_picture_button_spinner").hide(),$("#profile_edit_page_avatar_error").show()}})).fail((function(){p("profile_edit_delete_picture_button",!1),$("#profile_edit_delete_picture_button_spinner").hide(),$("#profile_edit_update_picture_button_spinner").hide(),$("#profile_edit_page_avatar_error").show()}))}))),$("#profile_edit_delete_picture_button").length&&$("#profile_edit_delete_picture_button").on("click",(function(){p("profile_edit_update_picture_button",!0),$("#profile_edit_delete_picture_button_spinner").show(),$("#profile_edit_update_picture_button_spinner").hide(),$("#profile_edit_page_avatar_error").hide();$.ajax({url:"/stoody/api/v1/user/delete/picture",method:"POST",timeout:0}).done((function(e){location.reload()})).fail((function(){p("profile_edit_update_picture_button",!1),$("#profile_edit_delete_picture_button_spinner").hide(),$("#profile_edit_update_picture_button_spinner").hide(),$("#profile_edit_page_avatar_error").show()}))})),$("#userProfileSecurityPage").length){function b(e){$("#securityValidationModal").modal("show"),$("#verificationCodeInputError").hide(),$("#verificationCodeInput").val(""),$("#verifyButton").off(),$("#verifyButton").on("click",(function(){let t;t="email"==e?"/user/profile/security/email/verify?email="+$("#email").val().trim()+"&otp="+$("#verificationCodeInput").val().trim():"/user/profile/security/phone/verify?phoneNumber="+$("#phone").val().trim()+"&otp="+$("#verificationCodeInput").val().trim();var o={url:t,method:"POST",timeout:0};$.ajax(o).done((function(e){try{let t=e.responseStatus,o=e.response;"SUCCESS"==t?location.reload():"BAD_REQUEST"==t||"ACCESS_DENIED"==t?($("#verificationCodeInputError").show(),$("#verificationCodeInputError").text(o)):($("#verificationCodeInputError").show(),$("#verificationCodeInputError").text("You are not authorized to perform this action!"))}catch(e){$("#verificationCodeInputError").show(),$("#verificationCodeInputError").text("You are not authorized to perform this action!")}}))}))}$("#updateEmailRequestButton").on("click",(function(){$("#updateEmailRequestButton").attr("disabled",!0),$("#updateEmailErrorMessage").hide();var e=new FormData,t={url:"/user/profile/security/email/change/request?email="+$("#email").val().trim(),method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:e};$.ajax(t).done((function(e){try{let t=JSON.parse(e),o=t.responseStatus,n=t.response;"OTP_REQUIRED_AND_SENT"==o?b("email"):($("#updateEmailErrorMessage").show(),$("#updateEmailErrorMessage").text(n))}catch(e){$("#updateEmailErrorMessage").show(),$("#updateEmailErrorMessage").text("You are not allowed to make this request!")}$("#updateEmailRequestButton").attr("disabled",!1)})).fail((function(){$("#updateEmailErrorMessage").show(),$("#updateEmailErrorMessage").text("You are not allowed to make this request!"),$("#updateEmailRequestButton").attr("disabled",!1)}))})),$("#savePasswordButton").on("click",(function(){$("#passwordError").hide(),$("#savePasswordButton").attr("disabled",!0);let t=$("#currentpassword").val(),o=$("#newpassword").val();var n={url:"/user/profile/security/password/change?currentPassword="+t+"&newPassword="+o+"&confirmPassword="+$("#confirmpassword").val()+"&strength="+e(o),method:"POST",timeout:0};$.ajax(n).done((function(e){try{let t=e.responseStatus,o=e.response;"SUCCESS"==t?$("#passwordError").text("Password has been updated!"):$("#passwordError").text(o),$("#passwordError").show(),$("#savePasswordButton").attr("disabled",!1)}catch(e){$("#passwordError").show(),$("#passwordError").text("You are not allowed to make this request!"),$("#savePasswordButton").attr("disabled",!1)}})).fail((function(){$("#passwordError").show(),$("#passwordError").text("You are not allowed to make this request!"),$("#savePasswordButton").attr("disabled",!1)}))})),$("#updatePhoneNumberButton").on("click",(function(){$("#updatePhoneNumberButton").attr("disabled",!0),$("#updatePhoneNumberErrorMessage").hide();var e=new FormData,t={url:"/user/profile/security/phone/change/request?phoneNumber="+$("#phone").val().trim(),method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:e};$.ajax(t).done((function(e){try{let t=JSON.parse(e),o=t.responseStatus,n=t.response;"OTP_REQUIRED_AND_SENT"==o?b("phone"):($("#updatePhoneNumberErrorMessage").show(),$("#updatePhoneNumberErrorMessage").text(n))}catch(e){$("#updatePhoneNumberErrorMessage").show(),$("#updatePhoneNumberErrorMessage").text("You are not allowed to make this request!")}$("#updatePhoneNumberButton").attr("disabled",!1)})).fail((function(){$("#updatePhoneNumberErrorMessage").show(),$("#updatePhoneNumberErrorMessage").text("You are not allowed to make this request!"),$("#updatePhoneNumberButton").attr("disabled",!1)}))}))}if($("#social_profiles_page_id").length){let V=document.getElementById("editor");setInterval((function(){V.querySelector(".ql-editor").innerHTML.length>13e3?$("#social_profile_page_editor_error").show():$("#social_profile_page_editor_error").hide();let e=document.getElementById("userSkills").value.length<1?null:JSON.parse(document.getElementById("userSkills").value),t="";if(null!=e)for(let o=0;o<e.length;o++)t+=o<1?e[o].value:", "+e[o].value;t.length>254?$("#social_profile_page_tagify_error").show():$("#social_profile_page_tagify_error").hide(),$("#social_profile_page_tagify_error").is(":visible")||$("#social_profile_page_editor_error").is(":visible")?u("social_profiles_page_submit_button",!1):u("social_profiles_page_submit_button",!0)}),500),$("#social_profiles_page_submit_button").on("click",(function(){$("#social_profiles_page_alert_div").hide();let e=document.getElementById("userSkills").value.length<1?null:JSON.parse(document.getElementById("userSkills").value),t="";if(null!=e)for(let o=0;o<e.length;o++)t+=o<1?e[o].value:","+e[o].value;let o=V.querySelector(".ql-editor").innerHTML,n=document.getElementById("twitterURL").value,i=document.getElementById("facebookURL").value,a=document.getElementById("githubURL").value,l=document.getElementById("instagramURL").value,r=document.getElementById("linkedInURL").value,s=document.getElementById("youtubeURL").value;var d=new FormData;d.append("twitterURL",n),d.append("facebookURL",i),d.append("githubURL",a),d.append("instagramURL",l),d.append("linkedinURL",r),d.append("youtubeURL",s),d.append("skills",t),d.append("aboutUser",o);var c={url:"/stoody/api/v1/user/social/profiles/update",method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:d};$.ajax(c).done((function(e){console.log(e),"SUCCESS"==JSON.parse(e).responseStatus?location.reload():$("#social_profiles_page_alert_div").show()})).fail((function(){$("#social_profiles_page_alert_div").show()}))}))}$("#preview_user_page_follow_button").length&&$("#preview_user_page_follow_button").on("click",(function(){$("#preview_user_page_follow_button").attr("disabled",!0);let e=new FormData,t=$(this).attr("data-username-string"),o=$(this).attr("data-preview-username-string");e.append("userFrom",t),e.append("userTo",o);let n={url:"/stoody/api/v1/user/follow/add",method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:e};$.ajax(n).done((function(e){console.log(e),"SUCCESS"==JSON.parse(e).responseStatus?location.reload():console.log("User could not be followed! (Reason is necessary!)"),$("#preview_user_page_follow_button").attr("disabled",!1)})).fail((function(){$("#preview_user_page_follow_button").attr("disabled",!1),console.log("Request is failed!")}))})),$("#preview_user_page_unfollow_button").length&&$("#preview_user_page_unfollow_button").on("click",(function(){$("#preview_user_page_unfollow_button").attr("disabled",!0);let e=new FormData,t=$(this).attr("data-username-string"),o=$(this).attr("data-preview-username-string");e.append("userFrom",t),e.append("userTo",o);let n={url:"/stoody/api/v1/user/follow/remove",method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:e};$.ajax(n).done((function(e){console.log(e),"SUCCESS"==JSON.parse(e).responseStatus?location.reload():console.log("User could not be followed! (Reason is necessary!)"),$("#preview_user_page_unfollow_button").attr("disabled",!1)})).fail((function(){$("#preview_user_page_unfollow_button").attr("disabled",!1),console.log("Request is failed!")}))})),$("#preview_user_page_report_button").length&&$("#preview_user_page_report_button").on("click",(function(){const e=$("#reportReasonText").val();if(e.length<1)return void $("#reportAlertContainer").show();$("#preview_user_page_report_button").attr("disabled");let t=$(this).attr("data-username-string"),o=$(this).attr("data-preview-username-string");var n=new FormData;n.append("reportedBy",t),n.append("reportedUser",o),n.append("reportReason",e);var i={url:"/users/preview/report",method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:n};$.ajax(i).done((function(e){console.log(e);let t=JSON.parse(e).response;$("#reportContainer").hide(),$("#reportAlertContainer").show(),$("#reportAlertContainer").text(t)})).fail((function(){location.reload()}))}));for(let q=1;q<21;q++)if(0!==$("#user_profile_navbar_button_"+q+"_page").length){document.getElementById("user_profile_navbar_button_"+q).parentNode.classList.add("active");break}if($("#standard_navbar_code_a").length){function C(e){var t={url:"/user/status/setme"+e,method:"POST",timeout:0};$.ajax(t).done((function(e){"SUCCESS"==e.responseStatus?location.reload():console.log("setting user status failed")}))}$("#standard_navbar_user_status_online").on("click",(function(){C("online")})),$("#standard_navbar_mobile_version_user_status_online").on("click",(function(){C("online")})),$("#standard_navbar_user_status_offline").on("click",(function(){C("offline")})),$("#standard_navbar_mobile_version_user_status_offline").on("click",(function(){C("offline")})),$("#standard_navbar_user_status_away").on("click",(function(){C("away")})),$("#standard_navbar_mobile_version_user_status_away").on("click",(function(){C("away")})),$("#standard_navbar_user_status_busy").on("click",(function(){C("busy")})),$("#standard_navbar_mobile_version_user_status_busy").on("click",(function(){C("busy")}))}if($("#helpCenterGlobalSearchBarForm").length){let J=$("#helpCenterGlobalSearchBarForm");$("#helpCenterGlobalSearchBarButton").on("click",(function(){J.find("#helpCenterGlobalSearchBarInput").val().length<1||(window.location.href="/help/search/"+J.find("#helpCenterGlobalSearchBarInput").val())}))}if($("#helpCenterLandingSearchForm").length&&$("#helpCenterLandingSearchFormButton").on("click",(function(){window.location.href="/help/search/"+$("#helpCenterLandingSearchFormInput").val()})),$("#help_center_manage_content_page").length&&(console.log("AMK"),$("#pills-development-tab").on("click",(function(){$("#contentPreviewer").html("")})),$("#pills-design-tab").on("click",(function(){$("#content").val().length>0?$("#contentPreviewer").html($("#content").val()):$("#contentPreviewer").html('<div class="p-3">Your HTML Content Preview</div>')}))),$("#course_overview_admin_dashboard").length){let G=20,H=G,Q=-12519;$(window).scroll((function(){$(document).height()-$(this).height()==$(this).scrollTop()&&$(this).scrollTop()!=Q&&(Q=$(this).scrollTop(),H+=G,w(H))}));const W=["courses_tab_tbody","approved_tab_tbody","pending_tab_tbody"];let Y=W[0];const K=["live","draft","deleted","pending"];let Z=0,X=K[0],ee="";let te=[];function y(){let e=$("#"+Y);for(let e=0;e<W.length;e++)$("#"+W[e]).children().off(),$("#"+W[e]).html("");if(courseOverviewDTOFiltered=te,Y!=W[0]){courseOverviewDTOFiltered=[];let e=Y==W[1]?"Live":"Pending";for(let t=0;t<te.length;t++){let o=te[t];o.status==e&&courseOverviewDTOFiltered.push(o)}}if(null!=ee&&""!=ee){let e=[];for(let t=0;t<courseOverviewDTOFiltered.length;t++){let o=courseOverviewDTOFiltered[t];naiveSearch(o.name,ee)&&e.push(o)}courseOverviewDTOFiltered=e}for(let t=0;t<courseOverviewDTOFiltered.length;t++){let o=courseOverviewDTOFiltered[t];$("<tr></tr>").append($("<td></td>").append($("<span></span>").text(t+1)),$("<td></td>").append($("<a></a>").attr("href","#").addClass("text-inherit").append($("<div></div>").addClass("d-lg-flex align-items-center").append(null==o.courseThumbnail||""==o.courseThumbnail?$("<div></div>").append($("<i></i>").addClass("bi-card-image fs-1 text-muted")):$("<img/>").addClass("img-4by3-lg rounded").attr("src",o.courseThumbnail).attr("width","50"),$("<a></a>").addClass("ms-lg-3 mt-2 mt-lg-0").append($("<span></span>").addClass("mb-1 me-2 text-link").text(o.name),$("<br>"),$("<span></span>").append($("<i></i>").addClass("mdi mdi-clock-time-four-outline text-muted me-1"),$("<span></span>").addClass("text-muted").text(o.createdAt))).attr("href","/stoody/api/v1/course/stoody/course/"+o.id+"/editor")))),$("<td></td>").append($("<div></div>").addClass("d-flex align-items-center").append($("<a></a>").attr("href","/users/"+o.authorUsername).addClass("text-link mb-0").text(o.authorUsername))),$("<td></td>").append($("<div></div>").append($("<span></span>").addClass(("Draft"==o.status?"bg-warning":"Pending"==o.status?"bg-info":"Live"==o.status?"bg-primary":"bg-danger")+" badge-dot me-1 d-inline-block align-middle me-2"),$("<span></span>").text(o.status))),"Draft"==o.status?$("<td></td>").append($("<span></span>").addClass("text-muted").text("No action")):"Pending"==o.status?$("<td></td>").append($("<a></a>").addClass("btn btn-warning btn-sm me-1 pendingCourseRejectButton").attr("id","pendingCourseRejectButton"+o.id).text("Reject"),$("<a></a>").addClass("btn btn-success btn-sm pendingCourseApproveFeedbackButton").attr("id","pendingCourseApproveFeedbackButton"+o.id).text("Approve")):"Live"==o.status?$("<td></td>").append($("<a></a>").addClass("btn btn-warning btn-sm me-1 pendingCourseRejectButton").attr("id","pendingCourseRejectButton"+o.id).text("Draft"),$("<a></a>").addClass("btn btn-danger btn-sm liveCourseDeletedFeedbackButton").attr("id","liveCourseDeletedFeedbackButton"+o.id).text("Deleted")):$("<td></td>").append($("<a></a>").addClass("btn btn-warning btn-sm me-1 pendingCourseRejectButton").attr("id","pendingCourseRejectButton"+o.id).text("Draft"),$("<a></a>").addClass("btn btn-success btn-sm pendingCourseApproveFeedbackButton").attr("id","pendingCourseApproveFeedbackButton"+o.id).text("Live")),"Draft"==o.status||"Deleted"==o.status||"Live"==o.status?$("<td></td>").append($("<span></span>").addClass("text-muted").text("No action")):$("<td></td>").append($("<a></a>").attr("href","#").addClass("text-link pendingCourseRejectFeedbackButton").attr("id","pendingCourseRejectFeedbackButton"+o.id).text("Reject with Feedback"))).appendTo(e)}$(".pendingCourseRejectButton").each((function(e,t){$(this).on("click",(function(){const e=$(this).attr("id").replace("pendingCourseRejectButton","");var t=new FormData;t.append("id",e);var o={url:"/stoody/api/v1/course/stoody/authorized/course/draft",method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:t};$.ajax(o).done((function(e){console.log(e),w(H)}))}))})),$(".pendingCourseApproveFeedbackButton").each((function(e,t){$(this).on("click",(function(){X=K[0],Z=$(this).attr("id").replace("pendingCourseApproveFeedbackButton",""),$("#feedbackModal").modal("show")}))})),$(".pendingCourseRejectFeedbackButton").each((function(e,t){$(this).on("click",(function(){X=K[1],Z=$(this).attr("id").replace("pendingCourseRejectFeedbackButton",""),$("#feedbackModal").modal("show")}))})),$(".liveCourseDeletedFeedbackButton").each((function(e,t){$(this).on("click",(function(){X=K[2],Z=$(this).attr("id").replace("liveCourseDeletedFeedbackButton",""),$("#feedbackModal").modal("show")}))}))}function w(e){var t={url:"/stoody/api/v1/course/stoody/authorized/course/all/overview?limit="+e,method:"GET",timeout:0};$.ajax(t).done((function(e){try{te=e,y()}catch(e){te=[],y()}}))}$("#courses-tab").on("click",(function(){Y=W[0],w(H)})),$("#approved-tab").on("click",(function(){Y=W[1],w(H)})),$("#pending-tab").on("click",(function(){Y=W[2],w(H)})),$("#searchBarId").on("input",(function(){ee=$(this).val(),y()})),$("#sendFeedbackButton").on("click",(function(){if($("#feedbackTextArea").val().length<1)return;let e=X==K[0]?"/live":X==K[1]?"/draft/feedback":"/delete";var t=new FormData;t.append("id",Z),t.append("message",$("#feedbackTextArea").val());var o={url:"/stoody/api/v1/course/stoody/authorized/course"+e,method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:t};$.ajax(o).done((function(e){w(H),console.log(e)})),setTimeout((function(){$("#sendFeedbackButton").modal("hide")}),500)})),$("#refreshTableButton").on("click",(function(){w(H)})),w(H)}if($("#internationalization_page_id").length&&$("#locale").on("input",(function(){$("#localeFlag").removeClass();let e="en"==$("#locale").val()?"us":$("#locale").val();$("#localeFlag").addClass("fi fi-"+e)})),$("#course_configuration_page").length){const oe=["Loading","CourseForm","UploadForm"],ne=["Video","Article","Quiz","Description"],ie={SectionTitleInput:0,SectionRemoveClick:1,LectureTitleInput:2,LectureRemoveClick:3,LectureVideoAddClick:4,LectureArticleAddClick:5,LectureQuizAddClick:6,LectureDescriptionAddClick:7,LectureArticleLockClick:8,LectureArticleDescriptionInput:9,LectureArticleRemoveClick:10,LectureHidden:11,LectureShown:12,LectureAddClick:13},ae=$("#loadingForm"),le=$("#courseForm"),re=$("#courseFormHeader"),se=$("#uploadForm"),de=$("#courseUploadProgressBarBottomText"),ce=$("#course_configuration_page");let ue=$("#course_thumbnail_input_file"),pe=$("#course_thumbnail_input_remove"),me=$("#course_promo_video_input_file"),fe=$("#course_promo_video_input_name"),he=$("#course_promo_video_input_remove"),ge=$("#course_configuration_page_add_section_button");const $e=$("#courseSectionEmptyMessage");let _e=$("#uploadStartButton"),ve=$("#submitCourseButton"),be=getBlankCourse();function S(e,t,o){try{const n=o.section,i=o.lecture;t==ie.SectionTitleInput?be.sections[n].title=e.val():t==ie.SectionRemoveClick?(be.sections.splice(n,1),E()):t==ie.LectureTitleInput?be.sections[n].lectures[i].title=e.val():t==ie.LectureRemoveClick?(be.sections[n].lectures.splice(i,1),E()):t==ie.LectureArticleLockClick?be.sections[n].lectures[i].locked=e.prop("checked"):t==ie.LectureArticleDescriptionInput?(be.sections[n].lectures[i].description=e.val(),be.sections[n].lectures[i].userFile=null,be.sections[n].lectures[i].video=null,be.sections[n].lectures[i].quiz=null):t==ie.LectureArticleRemoveClick?(be.sections[n].lectures[i].description=null,be.sections[n].lectures[i].userFile=null,be.sections[n].lectures[i].video=null,be.sections[n].lectures[i].quiz=null,E()):t==ie.LectureVideoAddClick?($("#65535FIVS").length&&$("#65535FIVS").remove(),$("<input>").attr({type:"file",id:"65535FIVS",style:"display:none"}).appendTo("body").on("change",(function(){const e=this.files[0];if(e){if(e.size>=1e9)return void alert("Warning: You cannot select a file larger than 1GB in size!");if(!e.name.endsWith(".mp4"))return void alert("Warning: Only MP4 files can be selected!");const t=document.createElement("video");t.src=URL.createObjectURL(e),t.addEventListener("error",(e=>{alert("Error: The selected file is not a playable MP4 file.")})),t.addEventListener("canplay",(o=>{be.sections[n].lectures[i].userFile=null,be.sections[n].lectures[i].video={};let a=new FormData;a.append("file",e),a.append("videoDuration",t.duration),be.sections[n].lectures[i].video.name=a.get("file").name,be.sections[n].lectures[i].video.url=a,be.sections[n].lectures[i].video.videoDuration=t.duration,be.sections[n].lectures[i].description=null,be.sections[n].lectures[i].quiz=null,E()}))}})),$("#65535FIVS").trigger("click")):t==ie.LectureArticleAddClick?($("#65535FIVS").length&&$("#65535FIVS").remove(),$("<input>").attr({type:"file",id:"65535FIVS",style:"display:none"}).appendTo("body").on("change",(function(){const e=this.files[0];if(e){if(e.size>=1e9)return void alert("Warning: You cannot select a file larger than 1GB in size!");if(e.name.endsWith(".mp4"))return void alert("Warning: MP4 files cannot be selected!");be.sections[n].lectures[i].userFile={};let t=new FormData;t.append("file",e),be.sections[n].lectures[i].userFile.name=t.get("file").name,be.sections[n].lectures[i].userFile.url=t,be.sections[n].lectures[i].video=null,be.sections[n].lectures[i].description=null,be.sections[n].lectures[i].quiz=null,E()}})),$("#65535FIVS").trigger("click")):t==ie.LectureQuizAddClick?function(e,t){const o=t.section,n=t.lecture;let i=!1;$("#quizModal").modal("show");let a=$("#quizModalContents");function l(e){a.html("");let t=null==e;try{t=e.length<1}catch{t=!0}function l(){a.append($("<div></div>").addClass("d-flex").css("flex-direction","column").append($("<span></span>").addClass("mb-3").text("You don't have any quiz to show."),$("<a></a>").addClass("btn btn-primary").text("Create new quiz")))}if(t)l();else{let t=0,o=$("<div></div>").css("overflow-y","auto").css("max-height","400px").addClass("table-responsive w-100"),n=$("<table></table>").addClass("table table-centered"),i=$("<tbody></tbody>");for(let o=0;o<e.length;o++){try{if(e[o].questions.length<1)continue}catch(e){continue}let n=0;for(let t=0;t<e[o].questions.length;t++)n+=e[o].questions[t].timeoutInSeconds;let a=formattedTimeSince(n),l=$("<tr></tr>").html(`\n                        <td>\n                            <div class="d-flex align-items-center">\n                                \x3c!-- quiz img --\x3e\n                                <a href="#"> <img src="${e[o].thumbnailUrl}" class="rounded img-4by3-lg"></a>\n                                \x3c!-- quiz content --\x3e\n                                <div class="ms-3">\n                                    <h4 class="mb-2 text-inherit">\n                                    ${o+1}. ${e[o].name}\n                                    </h4>\n\n                                    <div>\n                                        <span class="fs-6 me-1">\n                                            <span class="align-middle">\n                                                <i class="fe fe-list"></i>\n                                            </span>\n                                            ${e[o].questions.length} Questions\n                                        </span>\n                                        <span class="fs-6 me-1">\n                                            <span class="align-middle">\n                                                <i class="fe fe-clock"></i>\n                                            </span>\n                                            ${a}\n                                        </span>\n                                        <a class="btn btn-primary btn-sm ms-1 selectQuizId" id="selectQuizId_${e[o].id}" quizName="${e[o].name}">Select</a>\n                                    </div>\n                                </div>\n                            </div>\n                        </td>\n                        `);i.append(l),t++}t>0?(n.append(i),o.append(n),a.append(o)):l()}$(".selectQuizId").on("click",(function(e){be.sections[o].lectures[n].video=null,be.sections[o].lectures[n].userFile=null,be.sections[o].lectures[n].description=null,be.sections[o].lectures[n].quiz={},be.sections[o].lectures[n].quiz.id=$(e.target).attr("id").replace("selectQuizId_",""),be.sections[o].lectures[n].quiz.name=$(e.target).attr("quizName"),$("#quizModal").modal("hide"),E()})),i=!0}a.html(""),a.append($("<div></div>").addClass("spinner-border text-primary").css("width","4rem").css("height","4rem").attr("role","status"));var r={url:"http://localhost:8080/stoody/api/v1/quizzes/all/current/user",method:"GET",timeout:0};$.ajax(r).done((function(e){l(e)})).fail((function(){l(null)})),$("#quizModal").on("hide.bs.modal",(function(e){i||e.preventDefault()}))}(0,o):t==ie.LectureDescriptionAddClick?(be.sections[n].lectures[i].userFile=null,be.sections[n].lectures[i].video=null,be.sections[n].lectures[i].description="",be.sections[n].lectures[i].quiz=null,E()):t==ie.LectureAddClick?function(e){if(be.sections[e].lectures.length>20)return void alert("You cannot add more than 20 lectures!");let t=getBlankLecture();t.title="Blank Lecture",be.sections[e].lectures.push(t),E()}(n):t==ie.LectureShown?be.sections[n].lectures[i].uiCollapsed=!1:t==ie.LectureHidden&&(be.sections[n].lectures[i].uiCollapsed=!0)}catch(e){console.log("A critical event error happened! Reason: "+e)}}function x(e,t,o,n,i,a){n?(e.hide(),t.show(),t.text(i),o.show(),o.off()):(t.hide(),o.hide(),o.hide(),e.show(),e.val("")),a instanceof Function&&a()}function k(e){e==oe[0]?(ae.show(),le.hide(),re.hide(),se.hide(),de.hide()):e==oe[1]?(ae.hide(),le.show(),re.show(),se.hide(),de.hide()):(ae.hide(),le.hide(),re.hide(),se.show(),de.show())}function T(e){try{return null!=e.video&&e.video.videoDuration>0?(e.userFile=null,e.quiz=null,e.description=null,ne[0]):null!=e.userFile&&null!=e.userFile.name&&e.userFile.name.length>0?(e.video=null,e.quiz=null,e.description=null,ne[1]):null!=e.quiz?(e.video=null,e.userFile=null,e.description=null,ne[2]):null!=e.description?(e.video=null,e.userFile=null,e.quiz=null,ne[3]):null}catch(e){return null}}function F(e){try{return null!=e.video&&e.video.videoDuration>0?(e.userFile=null,e.quiz=null,e.description=null,e.video.name):null!=e.userFile&&null!=e.userFile.name&&e.userFile.name.length>0?(e.video=null,e.quiz=null,e.description=null,e.userFile.name):null!=e.quiz?(e.video=null,e.userFile=null,e.description=null,e.quiz.name):null!=e.description?(e.video=null,e.userFile=null,e.quiz=null,"Description"):null}catch(e){return null}}function B(e){var t=e.match(/section_(\d+)_lecture/)[1],o=e.match(/_lecture_(\d+)/)[1];let n={section:65535,lecture:65535};return n.section=t,n.lecture=o,n}function E(){let e=$("#courseSectionContents");e.children().off(),e.html("");try{be.sections.length}catch{be.sections=[]}0==be.sections.length?$e.show():$e.hide();for(let t=0;t<be.sections.length;t++){let o=$("<div></div>").addClass("bg-light rounded p-2 mb-4");o.attr("id","sectionElement_"+t);let n=$("<div></div>").addClass("d-flex border-bottom mb-3 align-items-center"),i=$("<input>").addClass("form-control sectionTitleInput").attr("id","sectionTitleInput__section_"+t+"_lecture_65535").attr("type","text").attr("maxlength","254").val(be.sections[t].title);n.append($("<i></i>").addClass("bi-diagram-3 text-muted ms-2 me-2"),$("<span></span>").addClass("text-muted me-2").text(t+1+"."),$("<div></div>").addClass("w-25 py-1").append(i),$("<a></a>").addClass("ms-2 me-1 text-danger").attr("role","button").append($("<i></i>").addClass("fe fe-trash-2 fs-6 sectionRemoveButton").attr("id","sectionRemoveButton__section_"+t+"_lecture_65535")));try{be.sections[t].lectures.length}catch{be.sections[t].lectures=[]}const a=be.sections[t].lectures.length<1;let l=$("<div></div>");if(a)l.append($("<div></div>").addClass("row mt-3").append($("<div></div>").addClass("col-12 display-2 d-flex justify-content-center align-items-center").append($("<i></i>").addClass("bi-collection")),$("<div></div>").addClass("col-12 text-muted mt-3 d-flex justify-content-center align-items-center").text("Add articles such as videos and files with a description.")));else{let e=$("<div></div>").addClass("list-group list-group-flush border-top-0").attr("id","lectureWrapper_s_"+t);for(let o=0;o<be.sections[t].lectures.length;o++){let n=be.sections[t].lectures[o],i=$("<div></div>").addClass("list-group-item rounded px-3 mb-1 bg-gray-300").attr("id","lectureListElement_s"+t+"_l_"+o),a=$("<div></div>").addClass("d-flex align-items-center justify-content-between");a.append($("<div></div>").addClass("d-flex align-items-center").append($("<span></span>").addClass("text-muted me-2").text(o+1+"."),$("<i></i>").addClass("bi-collection text-muted me-3"),$("<input>").addClass("form-control lectureTitleInput").attr("id","lectureTitleInput__section_"+t+"_lecture_"+o).attr("type","text").attr("maxlength","254").val(n.title)),$("<div></div>").append($("<a></a>").addClass("ms-2 me-1 text-danger").attr("role","button").append($("<i></i>").addClass("fe fe-trash-2 fs-6 lectureRemoveButton").attr("id","lectureRemoveButton__section_"+t+"_lecture_"+o)),$("<a></a>").attr("role","button").addClass("text-inherit "+(n.uiCollapsed?"collapsed":"")).attr("aria-expanded",n.uiCollapsed?"false":"true").attr("data-bs-toggle","collapse").attr("data-bs-target","#lectureCollapseList__section_"+t+"_lecture_"+o).attr("aria-controls","lectureCollapseList__section_"+t+"_lecture_"+o).append($("<span></span>").addClass("chevron-arrow").append($("<i></i>").addClass("fe fe-chevron-down")))));let l=$("<div></div>").addClass("collapse "+(n.uiCollapsed?"":"show")+" lectureCollapseList").attr("id","lectureCollapseList__section_"+t+"_lecture_"+o).attr("aria-labelledby","lectureListElement_s"+t+"_l_"+o).attr("data-bs-parent","lectureWrapper_s_"+t);const r=T(n);if(console.log("this is : "+r),null!=r&&""!=r){let e=$("<div></div>").addClass("mt-3 px-5 py-3 bg-dark-info-soft rounded-2");e.append($("<h4></h4>").addClass("user-select-none").text(r),$("<div></div>").addClass("form-check form-switch").append($("<input>").addClass("form-check-input lockedArticleSwitch").attr("id","lockedArticleSwitch__section_"+t+"_lecture_"+o).attr("type","checkbox").attr("role","switch").prop("checked",n.locked),$("<label></label>").addClass("form-check-label").text("Locked")),$("<div></div>").addClass("d-flex border-bottom mb-3 mt-3").append(r==ne[3]?$("<textarea></textarea>").addClass("form-control border-0 form-control-simple no-resize lectureArticleDescription").attr("id","lectureArticleDescription__section_"+t+"_lecture_"+o).attr("rows","3").attr("placeholder","Write a description").val(n.description):$("<h4></h4>").addClass("ms-2 text-muted").text(F(n)),$("<a></a>").attr("role","button").addClass("ms-2 me-1 text-danger").append($("<i></i>").addClass("fe fe-trash-2 fs-6 lectureArticleRemoveButton").attr("id","lectureArticleRemoveButton__section_"+t+"_lecture_"+o)))),l.append(e)}else{let e=$("<div></div>").addClass("my-2 mt-3");e.append($("<a></a>").attr("role","button").addClass("btn btn-secondary btn-sm mt-1 ms-1 lectureAddVideoButton").attr("id","lectureAddVideoButton_section_"+t+"_lecture_"+o).text("Add Video +"),$("<a></a>").attr("role","button").addClass("btn btn-secondary btn-sm mt-1 ms-1 lectureAddArticleButton").attr("id","lectureAddArticleButton_section_"+t+"_lecture_"+o).text("Add Article +"),$("<a></a>").attr("role","button").addClass("btn btn-secondary btn-sm mt-1 ms-1 lectureAddQuizButton").attr("id","lectureAddQuizButton_section_"+t+"_lecture_"+o).text("Add Quiz +"),$("<a></a>").attr("role","button").addClass("btn btn-secondary btn-sm mt-1 ms-1 lectureAddDescriptionButton").attr("id","lectureAddDescriptionButton_section_"+t+"_lecture_"+o).text("Add Description +")),l.append(e)}i.append(a,l),e.append(i)}l.append(e)}let r=$("<a></a>").addClass("btn btn-outline-primary btn-sm mt-3 addLectureButton").attr("id","addLectureButton__section_"+t+"_lecture_65535").attr("role","button").text("Add Lecture +");l.append(r),o.append(n,l),e.append(o)}$(".sectionTitleInput").on("input",(function(e){const t=B($(e.target).attr("id").replace("sectionTitleInput_",""));S($(e.target),ie.SectionTitleInput,t)})),$(".sectionRemoveButton").on("click",(function(e){const t=B($(e.target).attr("id").replace("sectionRemoveButton_",""));S($(e.target),ie.SectionRemoveClick,t)})),$(".lectureTitleInput").on("input",(function(e){const t=B($(e.target).attr("id").replace("lectureTitleInput_",""));S($(e.target),ie.LectureTitleInput,t)})),$(".lectureRemoveButton").on("click",(function(e){const t=B($(e.target).attr("id").replace("lectureRemoveButton_",""));S($(e.target),ie.LectureRemoveClick,t)})),$(".lectureCollapseList").on("hidden.bs.collapse",(function(e){const t=B($(e.target).attr("id").replace("lectureCollapseList_",""));S($(e.target),ie.LectureHidden,t)})),$(".lectureCollapseList").on("shown.bs.collapse",(function(e){const t=B($(e.target).attr("id").replace("lectureCollapseList_",""));S($(e.target),ie.LectureShown,t)})),$(".lockedArticleSwitch").on("click",(function(e){const t=B($(e.target).attr("id").replace("lockedArticleSwitch_",""));S($(e.target),ie.LectureArticleLockClick,t)})),$(".lectureArticleDescription").on("input",(function(e){const t=B($(e.target).attr("id").replace("lectureArticleDescription_",""));S($(e.target),ie.LectureArticleDescriptionInput,t)})),$(".lectureArticleRemoveButton").on("click",(function(e){const t=B($(e.target).attr("id").replace("lectureArticleRemoveButton_",""));S($(e.target),ie.LectureArticleRemoveClick,t)})),$(".addLectureButton").on("click",(function(e){const t=B($(e.target).attr("id").replace("addLectureButton_",""));S($(e.target),ie.LectureAddClick,t)})),$(".lectureAddVideoButton").on("click",(function(e){const t=B($(e.target).attr("id").replace("lectureAddVideoButton_",""));S($(e.target),ie.LectureVideoAddClick,t)})),$(".lectureAddArticleButton").on("click",(function(e){const t=B($(e.target).attr("id").replace("lectureAddArticleButton_",""));S($(e.target),ie.LectureArticleAddClick,t)})),$(".lectureAddQuizButton").on("click",(function(e){const t=B($(e.target).attr("id").replace("lectureAddQuizButton_",""));S($(e.target),ie.LectureQuizAddClick,t)})),$(".lectureAddDescriptionButton").on("click",(function(e){const t=B($(e.target).attr("id").replace("lectureAddDescriptionButton_",""));S($(e.target),ie.LectureDescriptionAddClick,t)}))}function L(){if(null!=be.title&&$("#courseTitle").val(be.title),null!=be.contextTags){setTimeout((function(){$("#courseContextTags").val(be.contextTags),console.log(be.contextTags)}),500)}if(null!=be.description&&""!=be.description){document.getElementById("editor").querySelector(".ql-editor").innerHTML=be.description}if(null!=be.thumbnail&&null!=be.thumbnail.name&&be.thumbnail.name.length>0&&A(),null!=be.promoVideo&&null!=be.promoVideo.name&&be.promoVideo.name.length>0&&D(),null!=be.courseCategoryId&&$("#courseCategory").val(be.courseCategoryId.toString()),null!=be.level&&$("#courseLevel").val(CourseLevelEnum[be.level]),null!=be.price&&$("#coursePriceInput").val(be.price),null!=be.discount&&$("#coursePriceDiscountInput").val(be.discount),null!=be.welcomeMessage&&$("#welcomeMessageInput").val(be.welcomeMessage),null!=be.congratulationsMessage&&$("#congratulationMessage").val(be.congratulationsMessage),null!=be.tags){setTimeout((function(){$("#courseTagsInput").val(be.tags),console.log(be.tags),$(".selectpicker").selectpicker("render")}),500)}E()}function A(){x(ue,$("#course_thumbnail_input_name"),pe,!0,be.thumbnail.name,null),pe.on("click",(function(){x(ue,$("#course_thumbnail_input_name"),pe,!1,be.thumbnail.name,(function(){be.thumbnail=getBlankUserFile(),be.thumbnail.name=null,be.thumbnail.url=null}))}))}function D(){x(me,fe,he,!0,be.promoVideo.name,null),he.on("click",(function(){x(me,fe,he,!1,be.promoVideo.name,(function(){be.promoVideo=null}))}))}function I(e){let t=[],o=0,n=0,i=0,a=0,l=0,r=$("#uploadFormProgressBar"),s=$("#uploadLogger");function d(e){s.html(s.html()+'<span class="bg-dark-warning-soft">'+e+"</span><br>")}function c(e){r.css("width",e+"%")}function u(){c(100),$("#courseUploadProgressBarBottomText").hide(),$("#uploadFormHeaderText").hide(),$("#uploadFormHeaderSpinner").hide(),$("#uploadFormHeaderDoneWithErrorsIcon").show(),$("#uploadFormCompleteButtonSpinner").hide(),t.length>0?d("Uploading assets is failed: "+t):d("Uploading assets is failed..."),d("Course could not be updated."),e||m(!0),f(!0)}function p(){d("The total size of the uploaded files: "+parseFileSize(n)),$("#uploadFormHeaderText").hide(),$("#uploadFormHeaderSpinner").hide(),$("#uploadFormHeaderDoneIcon").show(),$("#uploadFormCompleteButtonSpinner").hide(),t.length>0?d("Uploading assets is finished with errors:"+t):d("Uploading assets is finished..."),d("Course is updated."),$("#courseUploadProgressBarBottomText").hide(),e||m(!0),f(!0)}function m(e){e?($("#uploadFormReloadPageButtonSpinner").hide(),$("#uploadFormReloadPageButton").on("click",(function(){location.reload()}))):$("#uploadFormReloadPageButton").off()}function f(e){e?$("#uploadFormNextButton").on("click",(function(){window.location.href="/user/dashboard/instructor/courses"})):$("#uploadFormNextButton").off()}k(oe[2]),function(){be.title=$("#courseTitle").val(),be.title.length<1&&(be.title="Untitled");let e=$("#courseTagsInput").val().length<1?null:JSON.parse($("#courseTagsInput").val()),t="";if(null!=e)for(let o=0;o<e.length;o++)t+=o<1?e[o].value:","+e[o].value;be.tags=t;let o=document.getElementById("courseContextTags").value.length<1?null:JSON.parse(document.getElementById("courseContextTags").value),n="";if(null!=o)for(let e=0;e<o.length;e++)n+=e<1?o[e].value:","+o[e].value;be.contextTags=n,be.courseCategoryId=$("#courseCategory").val(),(null==be.courseCategoryId||null==be.courseCategoryId||be.courseCategoryId<0)&&(be.courseCategoryId=1),be.level=$("#courseLevel").val(),(null==be.level||null==be.level||be.level<0)&&(be.level=0),console.log("ONCE UPDATE STATIC COURSE FIELDS THE COURSE LEVEL IS: "+be.level);let i=document.getElementById("editor").querySelector(".ql-editor").innerHTML;be.description=i,be.price=$("#coursePriceInput").val(),null!=be.price&&null!=be.price||(be.price=0),be.discount=$("#coursePriceDiscountInput").val(),null!=be.discount&&null!=be.discount||(be.discount=0),be.welcomeMessage=$("#welcomeMessageInput").val(),be.congratulationsMessage=$("#congratulationMessage").val(),(null==be.thumbnail||null==be.thumbnail.name||null==be.thumbnail.name||be.thumbnail.name.length<1||null==be.thumbnail.url||null==be.thumbnail.url||be.thumbnail.url.length<1)&&(be.thumbnail=null),(null==be.promoVideo||null==be.promoVideo.name||null==be.promoVideo.name||be.promoVideo.name.length<1||null==be.promoVideo.url||null==be.promoVideo.url||be.promoVideo.url.length<1)&&(be.promoVideo=null)}(),console.log(be),$("#uploadFormReloadPageButton").hide(),0==e&&$("#uploadFormReloadPageButton").show(),m(!1),f(!1),$("#uploadModal").modal("hide"),$("#submitModal").modal("hide"),$("#uploadFormCourseTitle").text(be.title);let h=[];if(s.html(""),d("Starting to upload the course"),d("Checking course contents"),null!=be.thumbnail)try{if(be.thumbnail.url instanceof FormData){n+=be.thumbnail.url.get("file").size,o++;const e={url:"http://localhost:8080/stoody/api/v1/upload/user/file",method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:be.thumbnail.url},r=$.ajax(e).done((function(e){try{let r=JSON.parse(e),s=r.responseStatus,u=r.response;"SUCCESS"==s?(d(be.thumbnail.url.get("file").name+" uploaded successfully"),l+=be.thumbnail.url.get("file").size,d(parseFileSize(l)+"/"+parseFileSize(n)+" uploaded successfully"),be.thumbnail.id=u.id,be.thumbnail.name=u.name,be.thumbnail.url=u.url,i++,a=i/o*100,c(a)):(d(be.thumbnail.url.get("file").name+" could not be uploaded."),t.push(be.thumbnail.url.get("file").name+" could not be uploaded."))}catch(e){d("Course thumbnail '"+be.thumbnail.url.get("file").name+"' could not be uploaded"),t.push("Failed to upload: "+be.thumbnail.url.get("file").name)}})).fail((function(){d("Course thumbnail '"+be.thumbnail.url.get("file").name+"' could not be uploaded, connection fail"),t.push("Connection error! Failed to upload: "+be.thumbnail.url.get("file").name)}));h.push(r)}}catch(e){d("No course thumbnail found")}if(null!=be.promoVideo)try{if(be.promoVideo.url instanceof FormData){n+=be.promoVideo.url.get("file").size,o++;const e={url:"http://localhost:8080/stoody/api/v1/upload/user/file/video",method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:be.promoVideo.url},r=$.ajax(e).done((function(e){try{let r=JSON.parse(e),s=r.responseStatus,u=r.response;"SUCCESS"==s?(d(be.promoVideo.url.get("file").name+" uploaded successfully"),l+=be.promoVideo.url.get("file").size,d(parseFileSize(l)+"/"+parseFileSize(n)+" uploaded successfully"),be.promoVideo.id=u.id,be.promoVideo.name=u.name,be.promoVideo.url=u.url,be.promoVideo.videoDuration=u.videoDuration,be.promoVideo.subtitles=u.subtitles,i++,a=i/o*100,c(a)):(d(be.promoVideo.url.get("file").name+" could not be uploaded."),t.push(be.promoVideo.url.get("file").name+" could not be uploaded."))}catch(e){d("Course promo video '"+be.promoVideo.url.get("file").name+"' could not be uploaded"),t.push("Failed to upload: "+be.promoVideo.url.get("file").name)}})).fail((function(){d("Course promo video '"+be.promoVideo.url.get("file").name+"' could not be uploaded, connection fail"),t.push("Connection error! Failed to upload: "+be.promoVideo.url.get("file").name)}));h.push(r)}else d("Promo video updated")}catch(e){d("No promo video uploaded: "+e)}try{be.sections.length}catch{be.sections=[]}for(let e=0;e<be.sections.length;e++){try{be.sections[e].lectures.length}catch{be.sections[e].lectures=[]}for(let i=0;i<be.sections[e].lectures.length;i++)try{let a=be.sections[e].lectures[i];const r=T(a);if(r==ne[0]){if(null!=a.video)try{if(a.video.url instanceof FormData){n+=a.video.url.get("file").size,o++;const e={url:"http://localhost:8080/stoody/api/v1/upload/user/file/video",method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:a.video.url},i=$.ajax(e).done((function(e){try{let o=JSON.parse(e),i=o.responseStatus,r=o.response;"SUCCESS"==i?(d(a.video.url.get("file").name+" uploaded successfully"),l+=a.video.url.get("file").size,d(parseFileSize(l)+"/"+parseFileSize(n)+" uploaded successfully"),a.video.id=r.id,a.video.name=r.name,a.video.url=r.url,a.video.videoDuration=r.videoDuration,a.video.subtitles=r.subtitles):(d(a.video.url.get("file").name+" could not be uploaded."),t.push(a.video.url.get("file").name+" could not be uploaded."))}catch(e){d("Course promo video '"+a.video.url.get("file").name+"' could not be uploaded"),t.push("Failed to upload: "+a.video.url.get("file").name)}})).fail((function(){d("Course promo video '"+a.video.url.get("file").name+"' could not be uploaded, connection fail"),t.push("Connection error! Failed to upload: "+a.video.url.get("file").name)}));h.push(i)}else d("Course lecture video updated")}catch(e){d("Course lecture video could not be uploaded: "+e)}}else{if(r!=ne[1])continue;if(null!=a.userFile)try{if(a.userFile.url instanceof FormData){n+=a.userFile.url.get("file").size,o++;const r={url:"http://localhost:8080/stoody/api/v1/upload/user/file",method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:a.userFile.url},s=$.ajax(r).done((function(o){try{let r=JSON.parse(o),s=r.responseStatus,c=r.response;"SUCCESS"==s?(d(`Course section->${e}, lecture->${i} '`+a.userFile.url.get("file").name+"' article uploaded successfully"),l+=a.userFile.url.get("file").size,d(parseFileSize(l)+"/"+parseFileSize(n)+" uploaded successfully"),a.userFile.id=c.id,a.userFile.name=c.name,a.userFile.url=c.url):(d(a.userFile.url.get("file").name+" could not be uploaded."),t.push(a.userFile.url.get("file").name+" could not be uploaded."))}catch(o){d(`Course section->${e}, lecture->${i}->'`+a.userFile.url.get("file").name+"' could not be uploaded"),t.push("Failed to upload '"+a.userFile.url.get("file").name+`' in course section->${e}, lecture->${i}`)}})).fail((function(){d(`Course section->${e}, lecture->${i} '`+a.userFile.url.get("file").name+"' could not be uploaded, connection fail. Check your internet connection"),t.push("Connection error! Failed to upload: '"+a.userFile.url.get("file").name+`' in course section->${e}, lecture->${i}`)}));h.push(s)}}catch(t){d(`Course section->${e}, lecture->${i} no article uploaded.`)}}}catch(e){d("An error occured while uploading: "+e),t.push("An error occured while uploading: "+e)}}h.length<1&&d("No asset found to upload..."),$.when.apply(null,h).done((function(){checkIfObject(be.description)&&(be.description=JSON.stringify(be.description)),be.description=be.description.trim();for(let e=0;e<be.sections.length;e++)for(let t=0;t<be.sections[e].lectures.length;t++){let o=be.sections[e].lectures[t];checkIfObject(o.article)&&(o.article=JSON.stringify(o.article))}!function(e){var o={url:"http://localhost:8080/stoody/courses/pending/post"+(e?"/submit":"/save"),method:"POST",timeout:0,headers:{"Content-Type":"application/json"},data:JSON.stringify(be)};$.ajax(o).done((function(e){p()})).fail((function(){t+=" Request could not be made. Check course fields, please.",u()}))}(e)})).fail((function(){u()}))}ge.on("click",(function(){if(be.sections.length>=20)return void alert("You cannot add more than 20 sections!");let e=getBlankSection();e.title="Blank Section",be.sections.push(e),E()})),ue.on("change",(function(){if(ue[0].files[0].size/1048576>2)return alert("The file cannot be larger than 2 MB!"),void ue.val("");let e=new FormData;e.append("file",ue[0].files[0]),be.thumbnail=getBlankUserFile(),be.thumbnail.name=ue[0].files[0].name,be.thumbnail.url=e,A()})),me.on("change",(function(){const e=me[0].files[0];if(e){if(e.size>=1e9)return alert("Warning: You cannot select a file larger than 1GB in size!"),void me.val("");if(!e.name.endsWith(".mp4"))return alert("Warning: Only MP4 files can be selected!"),void me.val("");const t=document.createElement("video");t.src=URL.createObjectURL(e),t.addEventListener("error",(e=>{alert("Error: The selected file is not a playable MP4 file."),me.val("")})),t.addEventListener("canplay",(e=>{be.promoVideo=getBlankVideo(),be.promoVideo.name=me[0].files[0].name,be.promoVideo.url=new FormData,be.promoVideo.url.append("file",me[0].files[0]),be.promoVideo.url.append("videoDuration",t.duration),D()}))}})),_e.on("click",(function(){I(!1)})),ve.on("click",(function(){I(!0)})),setTimeout((function(){try{if(isNaN(ce.attr("data-course-id"))||(be.id=ce.attr("data-course-id")),be.id>0){let e={url:`http://localhost:8080/stoody/courses/pending/get/${be.id}`,method:"GET",timeout:0};$.ajax(e).done((function(e){console.log(e);try{if(be=e.response,"SUCCESS"!=e.responseStatus)throw"Creating a new course interface";isNaN(ce.attr("data-course-id"))||(be.id=ce.attr("data-course-id")),k(oe[1]),L(),console.warn("Course Editor mode is on, editing a course..."),console.log(e.response),console.log(e.responseStatus)}catch(e){k(oe[1]),be=getBlankCourse(),L(),console.warn(e)}})).fail((function(){k(oe[1]),be=getBlankCourse(),L()}))}else k(oe[1])}catch(e){k(oe[1]),be=getBlankCourse(),L(),console.log(e)}}),1e3)}if($("#course_single_page").length){let Ce=$("#loadingForm"),ye=$("#courseSingleForm"),we=getBlankCourse();function P(e,t){($("#displayItemModal").modal("show"),e)?($("#displayItemModalPlayableContent").show(),$("#displayItemModalUnplayableContent").hide(),$("#displayItemModalVideoDownloadButton").attr("href",t),videojs(document.querySelector("#displayItemModalVideo")).src({src:t,type:"video/mp4"})):($("#displayItemModalPlayableContent").hide(),$("#displayItemModalUnplayableContent").show(),$("#displayItemModalFileDownloadButton").attr("href",t))}!function(){try{var e={url:"http://localhost:8080/stoody/api/v1/course/findCourseRestricted/"+1,method:"GET",timeout:0};$.ajax(e).done((function(e){we=e.response,setTimeout((function(){Ce.hide(),ye.fadeIn(),async function(){$("#courseSingleTitle").text(we.title),CourseLevelEnum[we.level]>0&&$("#courseSingleLevel1").attr("fill","#754FFE"),CourseLevelEnum[we.level]>1&&$("#courseSingleLevel2").attr("fill","#754FFE"),CourseLevelEnum[we.level]>2&&$("#courseSingleLevel3").attr("fill","#754FFE"),$("#courseSingleLevel").text(we.level);let e=isNaN(we.price)||we.price<=0||100==we.discount,t=isNaN(we.discount)||we.discount<=0,o=e?"Free":t?"$"+we.price:"$"+(we.price-we.discount/100*we.price),n=t?"":"$"+we.price;$("#courseSinglePrice").text(o),$("#courseSingleDiscount").text(n);let i=[],a=[],l=[],r=$("#courseSingleContents");if(null!=we.sections&&we.sections.length>0){for(let e=0;e<we.sections.length;e++){let t=$("<li></li>").addClass("list-group-item px-0"+(0==e?" pt-0":""));if(null!=we.sections[e].lectures&&we.sections[e].lectures.length>0){let o=$("<div></div>").addClass("pt-3 pb-2");for(let t=0;t<we.sections[e].lectures.length;t++){let n=we.sections[e].lectures[t],r=!1;null!=n.article&&"mp4"==get_url_extension(n.article)?(r=!0,i["lectureDurationItemSection"+e+"_lecture"+t]=n.article,n.locked||(a["contentSection"+e+"_lecture"+t]=n.article)):n.locked||(l["unplayableContentSection"+e+"_lecture"+t]=n.article),o.append($("<a></a>").addClass("mb-2 d-flex justify-content-between align-items-center text-inherit text-decoration-none "+(n.locked?"disableClick":"")).append($("<div></div>").addClass("text-truncate").append($("<span></span>").addClass("icon-shape bg-light icon-sm rounded-circle me-2 "+(n.locked?"text-secondary":"")).append($("<i></i>").addClass(n.locked?"fe fe-lock":r?"mdi mdi-play":getIconByExtension(get_url_extension(n.article)))),$("<span></span>").text(n.title)),$("<div></div>").addClass("text-truncate").append($("<span></span>").attr("id","lectureDurationItemSection"+e+"_lecture"+t))).attr("href","#").attr("id",(r?"contentSection":"unplayableContentSection")+e+"_lecture"+t))}t.append($("<a></a>").addClass("h4 mb-0 d-flex align-items-center text-inherit text-decoration-none active").attr("data-bs-toggle","collapse").attr("href","#rowCollapseSection"+e).attr("aria-expanded","false").attr("aria-controls","rowCollapseSection"+e).append($("<div></div>").addClass("me-auto").append($("<span></span>").text(we.sections[e].title),$("<span></span>").addClass("ms-2 text-muted fs-5").text("("+we.sections[e].lectures.length+" Lectures)")),$("<span></span>").addClass("chevron-arrow ms-4").append($("<i></i>").addClass("fe fe-chevron-down fs-4"))),$("<div></div>").addClass("collapse").attr("id","rowCollapseSection"+e).attr("data-bs-parent","#courseAccordion").append(o))}r.append(t)}for(const[e,t]of Object.entries(a))$("#"+e).on("click",(function(){P(!0,t)}));for(const[e,t]of Object.entries(l))$("#"+e).on("click",(function(){P(!1,t)}));!async function(){for(const[e,t]of Object.entries(i)){$("#"+e).append($("<div></div>").addClass("spinner-border spinner-border-sm").attr("role","status"));let o=document.createElement("video");o.preload="metadata",o.onloadedmetadata=function(){var t=o.duration;o.duration=t,$("#"+e).html(""),$("#"+e).text(formattedTimeSince(t))},o.src=t}}()}null==we.description||""==we.description.trim()?$("#courseSingleDescription").append($("<span></span>").text("No content")):new Quill("#courseSingleDescription",{modules:{toolbar:!1},readOnly:!0,theme:"snow"}).pasteHTML(we.description);let s=$("#courseContextTagsPlace");if(null==we.contextTags||""==we.contextTags.trim())s.append($("<span></span>").text("No content"));else{s.html("");const e=we.contextTags.split(",");for(let t=0;t<e.length;t++){const o=e[t];s.append($("<li></li>").append($("<i></i>").addClass("mdi mdi-check-circle-outline fs-4 text-success me-1 mt-2"),$("<span></span>").text(o)))}}}()}),100),console.log(we)}))}catch(e){location.href="/error"}}()}if($("#course_single_page2").length){let Se=0,xe=0,ke=$("#loadingForm"),Te=$("#courseSingle2Form"),Fe=$("#courseSingle2Contents"),Be=getBlankCourse();function R(e,t){if(null==e||null==e.sections||null==e.sections[t].lectures||e.sections[t].lectures.length<1)return-1;let o=0;for(let n=0;n<e.sections[t].lectures.length;n++){"mp4"==get_url_extension(e.sections[t].lectures[n].article)&&o++}return o}function M(e,t){if(null==e||null==e.sections||null==e.sections[t].lectures||e.sections[t].lectures.length<1)return-1;let o=0;for(let n=0;n<e.sections[t].lectures.length;n++){"mp4"!=get_url_extension(e.sections[t].lectures[n].article)&&o++}return o}function O(e,t,o){var n;null==e||isNaN(t)||isNaN(o)||null==e.sections||t>e.sections.length-1||null==e.sections[t].lectures||o>e.sections[t].lectures.length-1?console.log("Somethings went wrong!"):(Se=t,xe=o,n=e.sections[t].lectures[o].article,$("#courseSingle2Video").hide(),$("#courseSingle2FileDownloadDiv").hide(),"mp4"==get_url_extension(n)?($("#courseSingle2Video").show(),videojs(document.querySelector("#courseSingle2Video")).src({src:n,type:"video/mp4"})):$("#courseSingle2FileDownloadDiv").show(),N())}async function N(){if(Fe.html(""),$("#courseSingle2SectionTitle").text(Be.sections[Se].title),$("#courseSingle2LectureTitle").text(Be.sections[Se].lectures[xe].title),$("#courseSingle2Title").text(Be.title),null!=Be.sections&&Be.sections.length>0){for(let e=0;e<Be.sections.length;e++){let t=$("<li></li>").addClass("list-group-item p-0 bg-transparent"),o=$("<a></a>").addClass("h4 mb-0 d-flex align-items-center text-inherit text-decoration-none py-3 px-4").attr("data-bs-toggle","collapse").attr("href","#cs2link_s"+e).attr("role","button").attr("aria-expanded","false").attr("aria-controls","cs2link_s"+e),n=$("<div></div>").addClass("me-auto"),i=$("<span></span>").text(Be.sections[e].title);const a=R(Be,e),l=M(Be,e);let r="";a>0&&(r+=1==a?a+" video":a+" videos"),l>0&&(r+=(a>0?" ":"")+l==1?l+" file":l+" files");let s=$("<p></p>").addClass("mb-0 text-muted fs-6 mt-1 fw-normal").text(r);n.append(i,s);let d=$("<span></span>").addClass("chevron-arrow ms-4"),c=$("<i></i>").addClass("fe fe-chevron-down fs-4");d.append(c),o.append(n,d),t.append(o);let u=$("<div></div>").addClass("collapse show").attr("id","cs2link_s"+e).attr("data-bs-parent","#courseAccordion"),p=$("<ul></ul>").addClass("list-group list-group-flush"),m=$("<li></li>").addClass("list-group-item"),f=$("<div></div>"),h=$("<div></div>").addClass("progress").css("height","6px"),g=$("<div></div>").addClass("progress-bar bg-success").attr("role","progressbar").css("width","10%"),_=$("<small></small>").text("5% Completed");if(h.append(g),f.append(h,_),m.append(f),p.append(m),u.append(p),t.append(u),null!=Be.sections[e].lectures&&Be.sections[e].lectures.length>0)for(let t=0;t<Be.sections[e].lectures.length;t++){let o=$("<li></li>").addClass("list-group-item list-group-item-action"+(Se==e&&xe==t?" active":"")),n=$("<a></a>").addClass("d-flex justify-content-between align-items-center text-inherit text-decoration-none"+(Se==e&&xe==t?" text-white":"")).attr("href","#").attr("id","lecture_s"+e+"_l_"+t),i=$("<div></div>").addClass("text-truncate"),a=$("<span></span>").addClass("icon-shape bg-light text-primary icon-sm rounded-circle me-2").html('<i class="'+getIconByExtension(get_url_extension(Be.sections[e].lectures[t].article))+' fs-4"></i>'),l=$("<span></span>").text(Be.sections[e].lectures[t].title);i.append(a,l);let r=$("<div></div>").addClass("text-truncate"),s=$("<span></span>").text("."+get_url_extension(Be.sections[e].lectures[t].article));r.append(s),n.append(i,r),o.append(n),p.append(o)}Fe.append(t)}!function(){for(let e=0;e<Be.sections.length;e++)for(let t=0;t<Be.sections[e].lectures.length;t++)$("#lecture_s"+e+"_l_"+t).on("click",(function(){O(Be,e,t)}))}()}(CourseLevelEnum[Be.level]>0&&$("#courseSingle2Level1").attr("fill","#754FFE"),CourseLevelEnum[Be.level]>1&&$("#courseSingle2Level2").attr("fill","#754FFE"),CourseLevelEnum[Be.level]>2&&$("#courseSingle2Level3").attr("fill","#754FFE"),$("#courseSingle2Level").text(Be.level),$("#courseSingle2Description").html(),null==Be.description||""==Be.description.trim())?$("#courseSingle2Description").append($("<span></span>").text("No content")):new Quill("#courseSingle2Description",{modules:{toolbar:!1},readOnly:!0,theme:"snow"}).pasteHTML(Be.description);let e=$("#courseContextTagsPlace");if(e.html(""),null==Be.contextTags||""==Be.contextTags.trim())e.append($("<span></span>").text("No content"));else{e.html("");const t=Be.contextTags.split(",");for(let o=0;o<t.length;o++){const n=t[o];e.append($("<li></li>").append($("<i></i>").addClass("mdi mdi-check-circle-outline fs-4 text-success me-1 mt-2"),$("<span></span>").text(n)))}}}!function(){try{var e={url:"http://localhost:8080/stoody/api/v1/course/findCourseWithDetails/"+1,method:"GET",timeout:0};$.ajax(e).done((function(e){Be=e.response,setTimeout((function(){ke.hide(),Te.fadeIn(),N()}),100),console.log(Be)}))}catch(e){location.href="/error"}}(),O(Be,xe,Se)}}();
"use strict";!function(){var i=window.location+"",t=i.replace(window.location.protocol+"//"+window.location.host+"/","");$("ul#sidebarnav a").filter((function(){return this.href===i||this.href===t})).parentsUntil(".sidebar-nav").each((function(i){$(this).is("li")&&0!==$(this).children("a").length?($(this).children("a").addClass("active"),$(this).parent("ul#sidebarnav").length,$(this).addClass("active")):$(this).is("ul")||0!==$(this).children("a").length?$(this).is("ul")&&$(this).addClass("in"):$(this).addClass("active")}))}();